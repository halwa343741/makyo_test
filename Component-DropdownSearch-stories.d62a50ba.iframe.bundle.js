/*! For license information please see Component-DropdownSearch-stories.d62a50ba.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunktech_test=self.webpackChunktech_test||[]).push([[154],{"./src/Component/DropdownSearch.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DropdownSearchField:()=>DropdownSearchField,__namedExportsOrder:()=>__namedExportsOrder,default:()=>DropdownSearch_stories});var react=__webpack_require__("./node_modules/react/index.js");const mergeClasses=(...classes)=>classes.filter(((className,index,array)=>Boolean(className)&&array.indexOf(className)===index)).join(" ");var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Icon=(0,react.forwardRef)((({color="currentColor",size=24,strokeWidth=2,absoluteStrokeWidth,className="",children,iconNode,...rest},ref)=>(0,react.createElement)("svg",{ref,...defaultAttributes,width:size,height:size,stroke:color,strokeWidth:absoluteStrokeWidth?24*Number(strokeWidth)/Number(size):strokeWidth,className:mergeClasses("lucide",className),...rest},[...iconNode.map((([tag,attrs])=>(0,react.createElement)(tag,attrs))),...Array.isArray(children)?children:[children]]))),createLucideIcon=(iconName,iconNode)=>{const Component=(0,react.forwardRef)((({className,...props},ref)=>{return(0,react.createElement)(Icon,{ref,iconNode,className:mergeClasses(`lucide-${string=iconName,string.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,className),...props});var string}));return Component.displayName=`${iconName}`,Component},X=createLucideIcon("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ChevronDown=createLucideIcon("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Search=createLucideIcon("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),CircleX=createLucideIcon("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const DropdownSearch=_ref=>{let{id,options,selected,setSelected,withSearch=!0,multiSelect=!0}=_ref;const[showList,setShowList]=(0,react.useState)(!1),listRef=(0,react.useRef)(null);return(0,react.useEffect)((()=>{const handler=e=>{var _listRef$current;null!=listRef&&null!==(_listRef$current=listRef.current)&&void 0!==_listRef$current&&_listRef$current.contains(e.target)||setShowList(!1)};return document.addEventListener("mousedown",handler),()=>{document.removeEventListener("mousedown",handler)}})),(0,react.useEffect)((()=>{multiSelect||setSelected((prev=>prev.length>0?[prev[0]]:[]))}),[multiSelect]),(0,jsx_runtime.jsxs)("div",{id,className:"border border-gray-300 flex justify-between p-1 rounded-md w-full gap-1 relative cursor-pointer",ref:listRef,onClick:()=>{setShowList((prev=>!prev))},children:[(0,jsx_runtime.jsx)("div",{className:"flex flex-1 justify-start gap-1 flex-wrap max-w-full",children:selected.map((o=>(0,jsx_runtime.jsxs)("div",{className:"flex py-1 px-2 bg-gray-100 justify-between rounded-xl flex-nowrap whitespace-nowrap max-w-full gap-1",onClick:e=>{e.stopPropagation()},children:[(0,jsx_runtime.jsx)("span",{className:"flex items-center text-ellipsis overflow-hidden cursor-default",children:o.text}),(0,jsx_runtime.jsx)("div",{className:"flex items-center cursor-pointer",onClick:()=>{return key=o.key,void setSelected((prev=>prev.filter((item=>item.key!==key))));var key},children:(0,jsx_runtime.jsx)(X,{size:15})})]},o.key)))}),(0,jsx_runtime.jsx)("div",{className:"flex align-top justify-center p-1",children:(0,jsx_runtime.jsx)(ChevronDown,{className:"text-gray-300 hover:text-gray-500 transition-colors duration-300"})}),showList&&(0,jsx_runtime.jsx)(DropdownList,{withSearch,options,selected,setSelected,multiSelect})]})},DropdownList=_ref2=>{let{options,selected,setSelected,withSearch,multiSelect}=_ref2;const[search,setSearch]=(0,react.useState)(""),[filtered,setFiltered]=(0,react.useState)(options);function isSelected(item){return selected.some((s=>s.key===item.key))}function highlightText(text){if(!search)return text;return text.split(new RegExp("(".concat(search,")"),"gi")).map(((part,index)=>part.toLowerCase()===search.toLowerCase()?(0,jsx_runtime.jsx)("span",{className:"bg-teal-300",children:part},index):part))}return(0,react.useEffect)((()=>{setFiltered((f=>options.filter((item=>item.text.toLocaleLowerCase().includes(search.toLocaleLowerCase())))))}),[search]),(0,react.useEffect)((()=>{withSearch||setSearch((prev=>""))}),[withSearch]),(0,jsx_runtime.jsxs)("div",{className:"absolute w-full top-[calc(100%+7px)] border border-gray-200 left-0 shadow-md z-[1001] p-2 bg-white",onClick:e=>e.stopPropagation(),children:[withSearch&&(0,jsx_runtime.jsxs)("div",{className:"flex w-full text-gray-500 border border-gray-300 rounded-md py-1 px-2 items-center gap-2",children:[(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(Search,{size:17})}),(0,jsx_runtime.jsx)("div",{className:"flex-1",children:(0,jsx_runtime.jsx)("input",{type:"text",className:"w-full border-none outline-none",value:search,onChange:e=>setSearch((prev=>e.target.value))})}),search&&(0,jsx_runtime.jsx)("div",{onClick:()=>setSearch((prev=>"")),children:(0,jsx_runtime.jsx)(CircleX,{size:17})})]}),(0,jsx_runtime.jsx)("ul",{className:"flex flex-col mt-1 max-h-[400px] overflow-y-auto",children:filtered.map((item=>(0,jsx_runtime.jsx)("li",{className:"".concat(isSelected(item)?"bg-teal-100":"bg-none hover:bg-teal-100"," transition-colors duration-75 text-left py-1 px-2 w-full"),onClick:()=>{isSelected(item)||setSelected(multiSelect?prev=>[...selected,item]:prev=>[item])},children:highlightText(item.text)},item.key)))})]})},Component_DropdownSearch=DropdownSearch;DropdownSearch.__docgenInfo={description:"",methods:[],displayName:"DropdownSearch",props:{withSearch:{defaultValue:{value:"true",computed:!1},required:!1},multiSelect:{defaultValue:{value:"true",computed:!1},required:!1}}};const DropdownSearch_stories={title:"Makyo Test - Tan Ory Jaka Perdana",component:Component_DropdownSearch},DropdownSearchField=(args=>{const[selected,setSelected]=(0,react.useState)([]);return(0,jsx_runtime.jsxs)("div",{className:"text-sm flex w-full items-center gap-5",children:["Label",(0,jsx_runtime.jsx)(Component_DropdownSearch,{...args,setSelected,selected})]})}).bind({});DropdownSearchField.args={id:"sdd-1",options:[{key:0,text:"Option 1"},{key:1,text:"Option with icon"},{key:2,text:"Long Long Option 3"},{key:3,text:"Long Long Long Option 4"},{key:4,text:"Long Long Long Long Option 5"},{key:5,text:"Long Long Long Long Long Option 6"}],withSearch:!0,multiSelect:!0};const __namedExportsOrder=["DropdownSearchField"];DropdownSearchField.parameters={...DropdownSearchField.parameters,docs:{...DropdownSearchField.parameters?.docs,source:{originalSource:'args => {\n  const [selected, setSelected] = useState<data[]>([]);\n  return <div className="text-sm flex w-full items-center gap-5">\r\n        Label\r\n      <DropdownSearch {...args} setSelected={setSelected} selected={selected} />\r\n    </div>;\n}',...DropdownSearchField.parameters?.docs?.source}}}},"./node_modules/react/cjs/react-jsx-runtime.production.min.js":(__unused_webpack_module,exports,__webpack_require__)=>{var f=__webpack_require__("./node_modules/react/index.js"),k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function q(c,a,g){var b,d={},e=null,h=null;for(b in void 0!==g&&(e=""+g),void 0!==a.key&&(e=""+a.key),void 0!==a.ref&&(h=a.ref),a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l,exports.jsx=q,exports.jsxs=q},"./node_modules/react/jsx-runtime.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/react/cjs/react-jsx-runtime.production.min.js")}}]);